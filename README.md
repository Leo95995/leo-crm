# Leo CRM

**Leo CRM** is a full-stack customer relationship management system built with the **MERN stack** (MongoDB, Express, React, Node.js).  
It includes secure authentication, role-based access control, contact and opportunity management, advanced filtering, and a modern, responsive UI with TailwindCSS.

This project demonstrates my ability to build robust, production-ready applications — from backend architecture to frontend UX, including CI/CD automation and Docker-based deployment.

> 🌐 **Live Demo:** <a href="https://www.leolab.dev" target="_blank">Click here</a>


### Test Accounts

You can use the following test accounts to explore the app functionality according to different user roles:

| Role    | Username                                        | Password       |
| ------- | ----------------------------------------------- | -------------- |
| Admin   | admin                                           | Admin123!      |
| Manager | manager                                         | Manager123!    |
| User    | viewer                                          | Viewer123!     |

---

## 🧰 Tech Stack

### Frontend
- React 19 (with Vite) + TypeScript
- Tailwind CSS for utility-first styling
- Redux Toolkit for global state
- styled-components
- react-toastify for alerts
- @mui/icons-material (icons)

### Backend
- Node.js + Express.js
- MongoDB + Mongoose
- JWT (access + refresh tokens)
- Bcrypt for password hashing
- Express middleware:
  - Role-based access control
  - CORS configuration
  - Auth/session security

### DevOps & Deployment
- Docker & Docker Compose
- GitLab CI/CD pipelines
- NGINX reverse proxy (HTTPS via Let's Encrypt)
- Hosted on Hetzner Cloud VM
- Domain setup with Porkbun

### Testing
- Jest + Supertest
- mongodb-memory-server for in-memory database testing

---

## ✨ Features

Leo CRM was built to simulate real-world CRM usage, with clear architectural boundaries and production-level robustness.

### 👤 Authentication & Authorization
- JWT-based login (access + refresh tokens)
- Role-based route protection (Admin / User)
- Public routes: registration, password reset
- Auth logic via Express middleware

### 🧠 Business Logic
- **Opportunities** include:
  - Assigned **contacts** and **users**
  - Internal **activities** (e.g. follow-ups, calls)
- Relationships are enforced and validated (e.g. contact-opportunity links)
- Access to data is filtered by **user role**

### 📒 CRM Functionality
- Full CRUD for Opportunities, Contacts, and Users
- Advanced filtering, pagination, and search
- Admin-only user management

### 🧪 Testing
- Backend unit and integration tests for:
  - Auth & role logic
  - CRUD routes
  - Business relationships

### 🛡️ Security
- Bcrypt password hashing
- Rate limiting (DoS protection)
- Secure token handling via HTTP-only cookies & headers
- HTTPS enforced via NGINX + Certbot
- CORS properly scoped
- Token-based password reset (Resend)

### 👨‍💻 Developer Experience
- Swagger UI autogenerated from route annotations
- Fully containerized via Docker Compose
- Environment secrets handled via GitLab protected variables

---

## 🐳 Deployment & DevOps

Leo CRM is fully containerized and deployed on a **Hetzner Cloud VM** using Docker Compose and GitLab CI/CD.

### Key Highlights:
- GitLab pipelines automate **build, test, and deploy** on every push to `main`
- NGINX reverse proxy handles:
  - SSL termination (Let’s Encrypt)
  - Frontend file serving
  - API routing to the backend
- Secure environment setup via `.env` and GitLab CI/CD secrets

This setup ensures scalability, maintainability, and a production-grade workflow.

---

## 📄 API Documentation

Backend APIs are documented using **Swagger**, generated via `swagger-jsdoc` and embedded JSDoc annotations.

> 🧭 Live Docs: [https://www.leolab.dev/api/api-docs/](https://www.leolab.dev/api/api-docs/)

Includes:
- Auth endpoints (login, signup, password reset)
- CRUD for main entities (users, contacts, opportunities)
- Role-based access descriptions
- Request/response examples with schemas

---

## 🧱 Project Structure

- `/frontend` – React app (Vite + Tailwind + Redux)
- `/backend` – Express API (TS + Mongoose + JWT)
- `/docs` – Screenshots, PlantUML diagrams, Swagger UI

Architecture and API flow are visually documented in the `docs/` folder.

---

## 📸 Screenshots

![Login Page](/docs/screenshots/login-page.png)  
![Dashboard](/docs/screenshots/dashboard.png)  
![Dashboard Black](/docs/screenshots/dashboard_2.png)
![Opportunita](/docs/screenshots/opportunità.png)
![Utenti](/docs/screenshots/utenti.png)

---

## 🏗 Architecture Diagram

This project uses a **reverse proxy architecture** with NGINX, running on a Hetzner Cloud VM.

![Architecture Diagram](/docs/screenshots/architecture.png)

**Flow Overview:**
- NGINX handles HTTPS, serving frontend and routing API requests
- React frontend makes API calls to Express backend
- Backend handles auth, logic, and DB access (MongoDB)
- GitLab CI/CD pipeline auto-deploys on push 

---

## 🔐 Security Overview

Leo CRM implements a full-stack security strategy:

- **JWT Auth** with access & refresh tokens
- **RBAC** via middleware
- **bcrypt** password hashing
- **Rate limiting** against brute-force
- **CORS** properly configured
- **HTTPS** enforced
- **Secure token reset** via Resend
- **HTTP-only tokens** to mitigate XSS

---

## ✅ Final Notes

This project highlights key full stack competencies:
- Secure, documented REST API design
- Frontend/backend integration with auth
- DevOps automation via Docker + CI/CD
- Full deploy pipeline on a real VM
- Real-world architecture, security, and testing strategies

> **Developed in my spare time during April and May 2025**, this project consolidates practical knowledge and showcases my hands-on approach to modern web development.

I’m continuously improving this project and open to feedback — feel free to reach out!

---

For more info about me and my work:  
📁 <a href="https://leonardo-malvolti.netlify.app/" target="_blank">Portfolio</a> | 💼 [LinkedIn](https://www.linkedin.com/in/leonardo-malvolti/)
